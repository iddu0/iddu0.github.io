<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Infinite Mac Embed</title>
  <style>
    .iframe-wrapper {
      position: relative;
      width: 640px;
      height: 480px;
      border: 1px solid #ccc;
    }
    .loading-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      color: #0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: monospace;
      font-size: 1.2em;
      z-index: 10;
    }
    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
  </style>

  <!-- preload emulator + disk image -->
  <link rel="preload" href="https://infinitemac.org/emulator/emulator.js" as="script">
  <link rel="preload" href="https://infinitemac.org/emulator/emulator.wasm" as="fetch" type="application/wasm" crossorigin="anonymous">
  <link rel="preload" href="https://infinitemac.org/disks/Mac%20OS%207.6.dsk" as="fetch" crossorigin="anonymous">

</head>
<body>
  <div class="iframe-wrapper">
    <div class="loading-screen">ðŸ’¾ booting macintosh...</div>
    <iframe
      src="https://infinitemac.org/embed?disk=Mac+OS+7.6&infinite_hd=true&machine=Quadra+650&embed=1"
      allow="cross-origin-isolated">
    </iframe>
  </div>

  <script>
    const iframe = document.querySelector("iframe");
    const loading = document.querySelector(".loading-screen");

    // once iframe loads, hide the loading screen
    iframe.addEventListener("load", () => {
      loading.style.display = "none";
    });
  </script>
</body>
</html>
